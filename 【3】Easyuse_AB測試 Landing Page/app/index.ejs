<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title><%- title %></title>
  <link rel="icon" href="favicon.png">
  <link rel="stylesheet" href="./assets/style/all.css">
  <!-- Google Analytics -->
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
    
    ga('create', 'UA-43276311-1', 'auto');
    ga('send', 'pageview');
  </script>
  <!-- End Google Analytics -->
</head>

<body>

  <!-- header -->
  <%- include ('./ejs/layout/header.ejs') %>

  <%- contents %>

  <!-- demo -->
  <%- include ('./ejs/layout/demo.ejs') %>  

  <!-- footer -->
  <%- include ('./ejs/layout/footer.ejs') %>  
  
  <!-- modal -->
  <%- include ('./ejs/layout/modal.ejs') %>  
  
  <script src="./assets/vendor/aos.js"></script>
  <script src="./assets/js/all.js"></script>
  <script>
    AOS.init({
    // Global settings:
    disable: false, // accepts following values: 'phone', 'tablet', 'mobile', boolean, expression or function
    startEvent: 'DOMContentLoaded', // name of the event dispatched on the document, that AOS should initialize on
    initClassName: 'aos-init', // class applied after initialization
    animatedClassName: 'aos-animate', // class applied on animation
    useClassNames: false, // if true, will add content of `data-aos` as classes on scroll
    disableMutationObserver: false, // disables automatic mutations' detections (advanced)
    debounceDelay: 50, // the delay on debounce used while resizing window (advanced)
    throttleDelay: 99, // the delay on throttle used while scrolling the page (advanced)
    

    // Settings that can be overridden on per-element basis, by `data-aos-*` attributes:
    offset: 120, // offset (in px) from the original trigger point
    delay: 0, // values from 0 to 3000, with step 50ms
    duration: 400, // values from 0 to 3000, with step 50ms
    easing: 'ease', // default easing for AOS animations
    once: false, // whether animation should happen only once - while scrolling down
    mirror: false, // whether elements should animate out while scrolling past them
    anchorPlacement: 'top-bottom', // defines which position of the element regarding to window should trigger the animation

    });
  </script>
  <script>
    // Example starter JavaScript for disabling form submissions if there are invalid fields
    (function() {
      'use strict';
      window.addEventListener('load', function() {
        // Fetch all the forms we want to apply custom Bootstrap validation styles to
        var forms = document.getElementsByClassName('needs-validation');
        // Loop over them and prevent submission
        var validation = Array.prototype.filter.call(forms, function(form) {
          form.addEventListener('submit', function(event) {
            if (form.checkValidity() === false) {
              event.preventDefault();
              event.stopPropagation();
            }
            form.classList.add('was-validated');
          }, false);
        });
      }, false);
    })();
  </script>
  <script>
    $(".custom-btn-demo").click(function() {      
      if($("#username").val() === '')
         return;
      if($("#companyname").val() === '')
         return;
      if($("#companytype").val() === '')
         return;
      if($("#phone").val() === '')
         return;
      if($("#email").val() === '')
         return;
      let emailstring = $("#email").val();
      let emailreg = /^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;       
      if(!emailreg.test(String(emailstring).toLowerCase()))
          return;
         

      var requestURL = "https://s1.mailhunter.com.tw/WebDemoReservation/WebDemoReservation.ashx";
      var dataJSON = {};
      dataJSON["category"] = "A/B Test模組";
      dataJSON["purchaser"] = $("#username").val();
      dataJSON["company"] = $("#companyname").val();
      dataJSON["industrycategory"] = $("#companytype").val();
      dataJSON["phone"] = $("#phone").val();
      dataJSON["email"] = $("#email").val();
      dataJSON["remark"] = $("#memo").val();

      console.log(dataJSON);
      
      $.ajax({
          url: requestURL,
          data: JSON.stringify(dataJSON),
          type: "POST",
          dataType: "json",
          contentType: "application/json;charset=utf-8",
          success: function(returnData){
              console.log(returnData);
          },
          error: function(xhr, ajaxOptions, thrownError){
              console.log(xhr.status);
              console.log(thrownError);
          }
      });
      ga('send', 'event', '預約 A/B Test模組Demo', 'MailHunter A/B Test模組', '0');
      
      $('#LandingModalCenter').modal('show');
         return false;
    });
    $(".custom-btn-finish").click(function() {   
      $('#form-demo').removeClass('was-validated');
      $("#username").val('');
      $("#companyname").val('');
      $("#companytype").val('');
      $("#phone").val('');
      $("#email").val('');
      $("#memo").val('');
    });
    </script>
    <script>
        jQuery('a').click(function(){
          jQuery('html, body').animate({
              scrollTop: jQuery( jQuery(this).attr('href') ).offset().top
          }, 800);
          return false;
      }); 
    </script>
</body>

</html>
