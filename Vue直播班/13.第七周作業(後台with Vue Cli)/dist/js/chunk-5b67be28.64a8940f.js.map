{"version":3,"sources":["webpack:///./src/views/admin/Orders.vue","webpack:///./src/components/OrderModal.vue","webpack:///./src/components/OrderModal.vue?658e","webpack:///./src/views/admin/Orders.vue?1e9b","webpack:///./node_modules/core-js/modules/es.function.name.js","webpack:///./src/components/OrderModal.vue?c98f"],"names":["class","active","isLoading","z-index","type","deleteAllOrder","orders","item","index","id","getDate","create_at","getTime","user","email","products","productSet","product_id","product","title","qty","unit","total","paidUpdateStatus","is_paid","for","editOrderItemDialog","deleteOrderItemDialog","order","tempOrder","ref","getOrderList","pagination","tabindex","role","aria-labelledby","aria-hidden","data-bs-dismiss","aria-label","style","name","tel","address","paid_date","key","final_total","value","editOrderItem","props","Object","default","data","orderModal","watch","this","methods","openModal","console","log","show","closeModal","hide","ticksOfItem","ticks","d","Date","getFullYear","getMonth","t","getHours","getMinutes","getSeconds","url","requestData","$http","put","then","response","success","$emit","$toast","message","error","catch","mounted","myOrderModal","document","querySelector","render","components","OrderModal","DelModal","Loading","page","targetPage","undefined","current_page","get","$router","push","is_order","JSON","parse","stringify","$refs","delModal","delete","ordModal","DESCRIPTORS","defineProperty","f","FunctionPrototype","Function","prototype","FunctionPrototypeToString","toString","nameRE","NAME","configurable","call","match"],"mappings":"0IAGSA,MAAM,iB,GAKJA,MAAM,c,EACX,eASQ,cARR,eAOK,WANH,eAAa,UAAT,QACJ,eAAc,UAAV,SACJ,eAAa,UAAT,QACJ,eAAa,UAAT,QACJ,eAAa,UAAT,QACJ,eAAW,UAAP,U,KAM+B,eAAI,mB,GAG7BA,MAAM,iB,GASRA,MAAM,c,GAEHA,MAAM,0B,uBASNA,MAAM,a,2KA5CvB,eAwDM,YAvDJ,eAAuD,GAA7CC,OAAQ,EAAAC,UAAYC,UAAS,M,mBACvC,eAIM,MAJN,EAIM,CAHJ,eAES,UAFDC,KAAK,SAASJ,MAAM,kBAAmB,QAAK,+BAAE,EAAAK,oBAAkB,YAI1E,eA6CQ,QA7CR,EA6CQ,CA5CN,EAUA,eAiCQ,e,mBAhCN,eA+BW,2BA/BuB,EAAAC,QAAM,SAAtBC,EAAMC,G,wBACtB,eA6BK,M,IA9ByCD,EAAKE,GAC/CT,MAAK,CAAC,wBAAuB,mBAA8BQ,EAAQ,IAAH,K,CAClE,eAAmE,W,8BAA7D,EAAAE,QAAQH,EAAKI,YAAS,GAAG,E,8BAAM,EAAAC,QAAQL,EAAKI,YAAS,KAC3D,eAA4B,yBAAtBJ,EAAKM,KAAKC,OAAK,GACrB,eASK,WARH,eAOK,KAPL,EAOK,E,mBANH,eAKW,2BALoBP,EAAKQ,UAAQ,SAA3BC,G,wBACf,eAGK,M,IAJ6CA,EAAWC,Y,eAEzDD,EAAWE,QAAQC,OAAO,OAAI,eAAEH,EAAWI,KAAK,IAClD,eAAEJ,EAAWE,QAAQG,MAAI,M,UAKjC,eAA0C,KAA1C,EAA0C,eAAjBd,EAAKe,OAAK,GACnC,eAQK,WAPH,eAMM,MANN,EAMM,C,eALJ,eAAqI,SAA9HtB,MAAM,mBAAmBI,KAAK,WAAYK,GAAE,oBAAeF,EAAKE,IAAO,SAAM,mBAAE,EAAAc,iBAAiBhB,I,yCAAgBA,EAAKiB,QAAO,I,0DAAZjB,EAAKiB,WAC5H,eAGQ,SAHDxB,MAAM,mBAAoByB,IAAG,oBAAelB,EAAKE,K,CAC1CF,EAAKiB,S,iBAAjB,eAAoC,SAAV,S,iBAC1B,eAAuB,SAAV,S,eAInB,eAKK,WAJH,eAGM,MAHN,EAGM,CAFJ,eAA2G,UAAnGpB,KAAK,SAASJ,MAAM,iCAAkC,QAAK,mBAAE,EAAA0B,oBAAoBnB,KAAO,KAAE,eAClG,eAA4G,UAApGH,KAAK,SAASJ,MAAM,gCAAiC,QAAK,mBAAE,EAAA2B,sBAAsBpB,KAAO,KAAE,oB,gBAO7G,eAAuF,GAA1EqB,MAAO,EAAAC,UAAWC,IAAI,WAAY,aAAa,EAAAC,c,iCAC5D,eAA0E,GAA7DxB,KAAM,EAAAyB,WAAa,eAAe,EAAAD,c,kCAC/C,eAAkF,GAAvExB,KAAM,EAAAsB,UAAWC,IAAI,WAAY,aAAa,EAAAC,c,6DCrD3D/B,MAAM,aACNS,GAAG,aACHwB,SAAS,KACTC,KAAK,SACLC,kBAAgB,oBAChBC,cAAY,OACZN,IAAI,S,GAEC9B,MAAM,wBAAwBkC,KAAK,Y,GACjClC,MAAM,0B,EACT,eAUM,OAVDA,MAAM,mCAAiC,CAC1C,eAEK,MAFDA,MAAM,cAAcS,GAAG,qB,CACzB,eAAiB,YAAX,UAER,eAKU,UAJRL,KAAK,SACLJ,MAAM,kDACNqC,kBAAgB,QAChBC,aAAW,Y,MAGVtC,MAAM,c,GACJA,MAAM,O,GACJA,MAAM,Y,EACT,eAAa,UAAT,QAAI,G,SACqBA,MAAM,S,EAG7B,eAAgC,MAA5BuC,MAAA,iBAAqB,MAAE,G,EAI3B,eAAc,UAAV,SAAK,G,EAIT,eAAW,UAAP,MAAE,G,EAIN,eAAW,UAAP,MAAE,G,GAMTvC,MAAM,Y,EACT,eAAa,UAAT,QAAI,G,GACDA,MAAM,S,EAGP,eAAkC,MAA9BuC,MAAA,iBAAqB,QAAI,G,EAI7B,eAAa,UAAT,QAAI,G,EAC6B,eAAI,mB,EAGzC,eAAa,UAAT,QAAI,G,YAG6B,eAAI,mB,YAMzC,eAAa,UAAT,QAAI,G,SAEEvC,MAAM,gB,SACRA,MAAM,c,EAId,eAAY,UAAR,OAAG,G,EAOb,eAAa,UAAT,QAAI,G,GACDA,MAAM,S,EACX,eAEQ,cADN,eAAS,Q,MAQHA,MAAM,Y,GAMXA,MAAM,8B,GACJA,MAAM,c,GAMFA,MAAM,mBAAmByB,IAAI,oB,uBASzCzB,MAAM,gB,EACT,eAMS,UALPI,KAAK,SACLJ,MAAM,4BACNqC,kBAAgB,SACjB,QAED,G,gDA3HR,eAqIM,MArIN,EAqIM,CA5HJ,eA2HM,MA3HN,EA2HM,CA1HJ,eAyHM,MAzHN,EAyHM,CAxHJ,EAWA,eA6FM,MA7FN,EA6FM,CA5FJ,eA2FM,MA3FN,EA2FM,CA1FJ,eAsBM,MAtBN,EAsBM,CArBJ,EACa,EAAAR,UAAUhB,M,iBAAvB,eAmBQ,QAnBR,EAmBQ,CAlBN,eAiBQ,cAhBN,eAGK,WAFH,EACA,eAAkC,yBAA3B,EAAAgB,UAAUhB,KAAK2B,MAAI,KAE5B,eAGK,WAFH,EACA,eAAmC,yBAA5B,EAAAX,UAAUhB,KAAKC,OAAK,KAE7B,eAGK,WAFH,EACA,eAAiC,yBAA1B,EAAAe,UAAUhB,KAAK4B,KAAG,KAE3B,eAGK,WAFH,EACA,eAAqC,yBAA9B,EAAAZ,UAAUhB,KAAK6B,SAAO,U,wBAKrC,eAkEM,MAlEN,EAkEM,CAjEJ,EACA,eAiCQ,QAjCR,EAiCQ,CAhCN,eA+BQ,cA9BN,eAGK,WAFH,EACA,eAA2B,yBAApB,EAAAb,UAAUpB,IAAE,KAErB,eAGK,WAFH,EACA,eAA+E,W,8BAAxE,EAAAC,QAAQ,EAAAmB,UAAUlB,YAAS,GAAG,E,8BAAM,EAAAC,QAAQ,EAAAiB,UAAUlB,YAAS,OAExE,eAQK,WAPH,EACA,eAKK,WAJS,EAAAkB,UAAUc,W,iBAAtB,eAEO,U,8BADF,EAAAjC,QAAQ,EAAAmB,UAAUc,YAAS,GAAG,E,8BAAM,EAAA/B,QAAQ,EAAAiB,UAAUc,YAAS,O,iBAEpE,eAAyB,SAAZ,cAGjB,eAMK,WALH,EACA,eAGK,WAFgC,EAAAd,UAAUL,S,iBAA7C,eAAkE,SAAlE,EAAsD,S,iBACtD,eAA2C,OAA3C,EAAgC,aAGpC,eAKK,WAJH,EACA,eAEK,yBADA,EAAAK,UAAUP,OAAK,SAK1B,EACA,eAeQ,QAfR,EAeQ,CAdN,EAGA,eAUQ,e,mBATN,eAQK,2BARc,EAAAO,UAAUd,UAAQ,SAA1BR,G,wBAAX,eAQK,MARmCqC,IAAKrC,EAAKU,Y,CAChD,eAEK,yBADAV,EAAKW,QAAQC,OAAK,GAEvB,eAAiD,yBAA1CZ,EAAKa,KAAK,MAAK,eAAEb,EAAKW,QAAQG,MAAI,GACzC,eAEK,KAFL,EAEK,eADAd,EAAKsC,aAAW,Q,UAK3B,eAYM,MAZN,EAYM,CAXJ,eAUM,MAVN,EAUM,C,eATJ,eAIqD,SAHnD7C,MAAM,mBACNI,KAAK,WACL0C,MAAM,GACNrC,GAAG,mB,qDAA4B,EAAAoB,UAAUL,QAAO,K,mBAAjB,EAAAK,UAAUL,WAC3C,eAGQ,QAHR,EAGQ,CAFM,EAAAK,UAAUL,S,iBAAtB,eAAyC,SAAV,S,iBAC/B,eAAuB,SAAV,oBAOzB,eAcM,MAdN,EAcM,CAbJ,EAOA,eAKS,UAJPpB,KAAK,SACLJ,MAAM,kBAAmB,QAAK,+BAAE,EAAA+C,cAAc,EAAAlB,cAC/C,mB,iCAYI,IAGbmB,MAAO,CACLpB,MAAO,CACLxB,KAAM6C,OACNC,QAFK,WAGH,MAAO,MAKbC,KAZa,WAaX,MAAO,CACLtB,UAAW,GACXuB,WAAY,KAGhBC,MAAO,CACLzB,MADK,WAEH0B,KAAKzB,UAAYyB,KAAK1B,QAG1B2B,QAAS,CACPC,UADO,WAELC,QAAQC,IAAIJ,KAAKzB,WACjByB,KAAKF,WAAWO,QAElBC,WALO,WAMLN,KAAKF,WAAWS,QAElBnD,QARO,SAQEoD,GACP,IAAMC,EAAsB,IAAdD,EACRE,EAAI,IAAIC,KAAKF,GAAOG,cAAgB,KAAO,IAAID,KAAKF,GAAOI,WAAa,GAAK,IAAM,IAAIF,KAAKF,GAAOrD,UACzG,OAAOsD,GAETpD,QAbO,SAaEkD,GACP,IAAMC,EAAsB,IAAdD,EACRM,EAAI,IAAIH,KAAKF,GAAOM,WAAa,IAAM,IAAIJ,KAAKF,GAAOO,aAAe,IAAM,IAAIL,KAAKF,GAAOQ,aAClG,OAAOH,GAETrB,cAlBO,SAkBQxC,GAAM,WACbE,EAAK6C,KAAKzB,UAAUpB,GACpB+D,EAAE,UAAO,wCAAP,eAAqC,aAArC,wBAA6E/D,GAC/EgE,EAAc,CAClBtB,KAAMG,KAAKzB,WAEbyB,KAAKoB,MACFC,IAAIH,EAAKC,GACTG,MAAK,SAACC,GACL,IAAMC,EAAUD,EAAS1B,KAAK2B,QAC9B,GAAIA,EACF,EAAKC,MAAM,eACX,EAAKC,OAAOF,QAAQ,UACpB,EAAK1B,WAAWS,WACX,CACL,IAAMoB,EAAUJ,EAAS1B,KAAK8B,QAC9B,EAAKD,OAAOE,MAAMD,OAGrBE,OAAM,SAACD,GACN,EAAKF,OAAOE,MAAMA,QAI1BE,QAjEa,WAkEX,IAAMC,EAAeC,SAASC,cAAc,eAC5CjC,KAAKF,WAAa,IAAI,KAAMiC,K,UC3MhC,GAAOG,OAAS,EAED,U,uCF6DA,I,UAAA,CACbC,WAAY,CACVC,cACA1D,WAAA,QACA2D,YAAA,KACAC,QAAA,SAEFzC,KAPa,WAQX,MAAO,CACL7C,OAAQ,GACR0B,WAAY,GACZH,UAAW,GACX3B,WAAW,IAGfqD,QAAS,CACPxB,aADO,SACO8D,GAAM,WACZC,OACKC,IAATF,EAAqBvC,KAAKtB,WAAWgE,aAAeH,EAChDrB,EAAM,UAAG,wCAAH,eAAiC,aAAjC,uBAAiFsB,EAC7FxC,KAAKpD,WAAY,EACjBoD,KAAKoB,MACFuB,IAAIzB,GACJI,MAAK,SAACC,GACL,IAAMC,EAAUD,EAAS1B,KAAK2B,QAC9B,GAAIA,EACF,EAAKxE,OAASuE,EAAS1B,KAAK7C,OAC5B,EAAK0B,WAAa6C,EAAS1B,KAAKnB,WAChC,EAAK9B,WAAY,MACZ,CACL,IAAM+E,EAAUJ,EAAS1B,KAAK8B,QAC9B,EAAKD,OAAOE,MAAMD,GAClB,EAAKiB,QAAQC,KAAK,KAClB,EAAKjG,WAAY,MAGpBiF,OAAM,SAACD,GACN,EAAKF,OAAOE,MAAMA,GAClB,EAAKhF,WAAY,MAGvByB,sBA1BO,SA0BgBpB,GACrBA,EAAK6F,UAAW,EAChB9C,KAAKzB,UAAYwE,KAAKC,MAAMD,KAAKE,UAAUhG,IAC3C+C,KAAKkD,MAAMC,SAASjD,aAEtBnD,eA/BO,WA+BW,WACVmE,EAAE,UAAO,wCAAP,eAAqC,aAArC,qBACRlB,KAAKoB,MACFgC,OAAOlC,GACPI,MAAK,SAACC,GACL,IAAMC,EAAUD,EAAS1B,KAAK2B,QAC9B,GAAIA,EACF,EAAK/C,eACL,EAAKiD,OAAOE,MAAM,gBACb,CACL,IAAMD,EAAUJ,EAAS1B,KAAK8B,QAC9B,EAAKD,OAAOE,MAAMD,OAGrBE,OAAM,SAACD,GACN,EAAKF,OAAOE,MAAMA,OAGxB3D,iBAjDO,SAiDWhB,GAAM,WAChBiE,EAAM,UAAG,wCAAH,eAAiC,aAAjC,iBAA2EjE,EAAKE,GACtFgE,EAAc,CAClBtB,KAAM,CACJ3B,QAASjB,EAAKiB,UAGlB8B,KAAKpD,WAAY,EACjBoD,KAAKoB,MACFC,IAAIH,EAAKC,GACTG,MAAK,SAACC,GACL,IAAMC,EAAUD,EAAS1B,KAAK2B,QAC9B,GAAIA,EACF,EAAKE,OAAOE,MAAM,YAClB,EAAKhF,WAAY,MACZ,CACL,IAAM+E,EAAUJ,EAAS1B,KAAK8B,QAC9B,EAAKD,OAAOE,MAAMD,GAClB,EAAK/E,WAAY,MAGpBiF,OAAM,SAACD,GACN,EAAKF,OAAOE,MAAMA,GAClB,EAAKhF,WAAY,MAGvBwB,oBA3EO,SA2EcnB,GACnB+C,KAAKzB,UAAYwE,KAAKC,MAAMD,KAAKE,UAAUhG,IAC3C+C,KAAKkD,MAAMG,SAASnD,aAEtB9C,QA/EO,SA+EEoD,GACP,IAAMC,EAAsB,IAAdD,EACRE,EAAI,IAAIC,KAAKF,GAAOG,cAAgB,KAAO,IAAID,KAAKF,GAAOI,WAAa,GAAK,IAAM,IAAIF,KAAKF,GAAOrD,UACzG,OAAOsD,GAETpD,QApFO,SAoFEkD,GACP,IAAMC,EAAsB,IAAdD,EACRM,EAAI,IAAIH,KAAKF,GAAOM,WAAa,IAAM,IAAIJ,KAAKF,GAAOO,aAAe,IAAM,IAAIL,KAAKF,GAAOQ,aAClG,OAAOH,IAGXgB,QAzGa,WA0GX9B,KAAKvB,aAAa,MG3KtB,GAAOyD,OAASA,EAED,iB,qBCLf,IAAIoB,EAAc,EAAQ,QACtBC,EAAiB,EAAQ,QAAuCC,EAEhEC,EAAoBC,SAASC,UAC7BC,EAA4BH,EAAkBI,SAC9CC,EAAS,wBACTC,EAAO,OAIPT,KAAiBS,KAAQN,IAC3BF,EAAeE,EAAmBM,EAAM,CACtCC,cAAc,EACdrB,IAAK,WACH,IACE,OAAOiB,EAA0BK,KAAKjE,MAAMkE,MAAMJ,GAAQ,GAC1D,MAAOlC,GACP,MAAO,Q,yDCjBf","file":"js/chunk-5b67be28.64a8940f.js","sourcesContent":["<template>\r\n  <div>\r\n    <Loading :active=\"isLoading\" :z-index=\"1060\"></Loading>\r\n    <div class=\"text-end mt-4\">\r\n      <button type=\"button\" class=\"btn btn-primary\" @click=\"deleteAllOrder()\">\r\n        清空訂單\r\n      </button>\r\n    </div>\r\n    <table class=\"table mt-4\">\r\n      <thead>\r\n      <tr>\r\n        <th>購買時間</th>\r\n        <th>Email</th>\r\n        <th>購買款項</th>\r\n        <th>應付金額</th>\r\n        <th>是否付款</th>\r\n        <th>編輯</th>\r\n      </tr>\r\n      </thead>\r\n      <tbody>\r\n        <template v-for=\"(item, index) in orders\" :key=\"item.id\" class=\"bg-product-hightlight\">\r\n          <tr class=\"bg-product-hightlight\" :class=\"{ 'bg-product-grey': index % 2 === 0 }\">\r\n            <td>{{getDate(item.create_at)}}<br>{{getTime(item.create_at)}}</td>\r\n            <td>{{item.user.email}}</td>\r\n            <td>\r\n              <ul class=\"list-unstyled\">\r\n                <template v-for=\"productSet in item.products\" :key=\"productSet.product_id\">\r\n                  <li>\r\n                    {{productSet.product.title}} 數量：{{productSet.qty}}\r\n                    {{productSet.product.unit}}\r\n                  </li>\r\n                </template>\r\n              </ul>\r\n            </td>\r\n            <td class=\"text-right\">{{item.total}}</td>\r\n            <td>\r\n              <div class=\"form-check form-switch\">\r\n                <input class=\"form-check-input\" type=\"checkbox\" :id=\"`paidSwitch${item.id}`\" @change=\"paidUpdateStatus(item)\" v-model=\"item.is_paid\">\r\n                <label class=\"form-check-label\" :for=\"`paidSwitch${item.id}`\">\r\n                  <span v-if=\"item.is_paid\">已付款</span>\r\n                  <span v-else>未付款</span>\r\n                </label>\r\n              </div>\r\n            </td>\r\n            <td>\r\n              <div class=\"btn-group\">\r\n                <button type=\"button\" class=\"btn btn-outline-primary btn-sm\" @click=\"editOrderItemDialog(item)\">檢視</button>\r\n                <button type=\"button\" class=\"btn btn-outline-danger btn-sm\" @click=\"deleteOrderItemDialog(item)\">刪除</button>\r\n              </div>\r\n            </td>\r\n          </tr>\r\n        </template>\r\n      </tbody>\r\n    </table>\r\n      <OrderModal :order='tempOrder' ref='ordModal' @emit-update=\"getOrderList\"></OrderModal>\r\n      <pagination :item=\"pagination\" @emit-navigate=\"getOrderList\"></pagination>\r\n      <DelModal :item='tempOrder' ref='delModal' @emit-update=\"getOrderList\"></DelModal>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport OrderModal from '../../components/OrderModal.vue'\r\nimport pagination from '../../components/Pagination.vue'\r\nimport DelModal from '../../components/DelModal.vue'\r\n\r\nimport Loading from 'vue3-loading-overlay'\r\nimport 'vue3-loading-overlay/dist/vue3-loading-overlay.css'\r\n\r\nexport default {\r\n  components: {\r\n    OrderModal,\r\n    pagination,\r\n    DelModal,\r\n    Loading\r\n  },\r\n  data () {\r\n    return {\r\n      orders: [],\r\n      pagination: {},\r\n      tempOrder: {},\r\n      isLoading: false\r\n    }\r\n  },\r\n  methods: {\r\n    getOrderList (page) {\r\n      const targetPage =\r\n        page === undefined ? this.pagination.current_page : page\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/orders?page=` + targetPage\r\n      this.isLoading = true\r\n      this.$http\r\n        .get(url)\r\n        .then((response) => {\r\n          const success = response.data.success\r\n          if (success) {\r\n            this.orders = response.data.orders\r\n            this.pagination = response.data.pagination\r\n            this.isLoading = false\r\n          } else {\r\n            const message = response.data.message\r\n            this.$toast.error(message)\r\n            this.$router.push('/')\r\n            this.isLoading = false\r\n          }\r\n        })\r\n        .catch((error) => {\r\n          this.$toast.error(error)\r\n          this.isLoading = false\r\n        })\r\n    },\r\n    deleteOrderItemDialog (item) {\r\n      item.is_order = true\r\n      this.tempOrder = JSON.parse(JSON.stringify(item))\r\n      this.$refs.delModal.openModal()\r\n    },\r\n    deleteAllOrder () {\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/orders/all`\r\n      this.$http\r\n        .delete(url)\r\n        .then((response) => {\r\n          const success = response.data.success\r\n          if (success) {\r\n            this.getOrderList()\r\n            this.$toast.error('已清空所有訂單。')\r\n          } else {\r\n            const message = response.data.message\r\n            this.$toast.error(message)\r\n          }\r\n        })\r\n        .catch((error) => {\r\n          this.$toast.error(error)\r\n        })\r\n    },\r\n    paidUpdateStatus (item) {\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/order/` + item.id\r\n      const requestData = {\r\n        data: {\r\n          is_paid: item.is_paid\r\n        }\r\n      }\r\n      this.isLoading = true\r\n      this.$http\r\n        .put(url, requestData)\r\n        .then((response) => {\r\n          const success = response.data.success\r\n          if (success) {\r\n            this.$toast.error('已更新訂單狀態。')\r\n            this.isLoading = false\r\n          } else {\r\n            const message = response.data.message\r\n            this.$toast.error(message)\r\n            this.isLoading = false\r\n          }\r\n        })\r\n        .catch((error) => {\r\n          this.$toast.error(error)\r\n          this.isLoading = false\r\n        })\r\n    },\r\n    editOrderItemDialog (item) {\r\n      this.tempOrder = JSON.parse(JSON.stringify(item)) // 需深層拷貝，避免圖片物件刪除未送出，下次編輯時卻未帶出的Bug。\r\n      this.$refs.ordModal.openModal()\r\n    },\r\n    getDate (ticksOfItem) {\r\n      const ticks = ticksOfItem * 1000\r\n      const d = new Date(ticks).getFullYear() + '-' + (new Date(ticks).getMonth() + 1) + '-' + new Date(ticks).getDate()\r\n      return d\r\n    },\r\n    getTime (ticksOfItem) {\r\n      const ticks = ticksOfItem * 1000\r\n      const t = new Date(ticks).getHours() + ':' + new Date(ticks).getMinutes() + ':' + new Date(ticks).getSeconds()\r\n      return t\r\n    }\r\n  },\r\n  mounted () {\r\n    this.getOrderList(1)\r\n  }\r\n}\r\n</script>\r\n","<template>\r\n\r\n  <div\r\n    class=\"modal fade\"\r\n    id=\"orderModal\"\r\n    tabindex=\"-1\"\r\n    role=\"dialog\"\r\n    aria-labelledby=\"exampleModalLabel\"\r\n    aria-hidden=\"true\"\r\n    ref=\"modal\"\r\n  >\r\n    <div class=\"modal-dialog modal-xl\" role=\"document\">\r\n      <div class=\"modal-content border-0\">\r\n        <div class=\"modal-header bg-dark text-white\">\r\n          <h5 class=\"modal-title\" id=\"exampleModalLabel\">\r\n            <span>訂單細節</span>\r\n          </h5>\r\n          <button\r\n            type=\"button\"\r\n            class=\"btn-close bg-product-hightlight bg-product-grey\"\r\n            data-bs-dismiss=\"modal\"\r\n            aria-label=\"Close\"\r\n          ></button>\r\n        </div>\r\n        <div class=\"modal-body\">\r\n          <div class=\"row\">\r\n            <div class=\"col-md-4\">\r\n              <h3>用戶資料</h3>\r\n              <table v-if=\"tempOrder.user\" class=\"table\">\r\n                <tbody >\r\n                  <tr>\r\n                    <th style=\"width: 100px\">姓名</th>\r\n                    <td> {{tempOrder.user.name}} </td>\r\n                  </tr>\r\n                  <tr>\r\n                    <th>Email</th>\r\n                    <td> {{tempOrder.user.email}} </td>\r\n                  </tr>\r\n                  <tr>\r\n                    <th>電話</th>\r\n                    <td> {{tempOrder.user.tel}} </td>\r\n                  </tr>\r\n                  <tr>\r\n                    <th>地址</th>\r\n                    <td> {{tempOrder.user.address}} </td>\r\n                  </tr>\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n            <div class=\"col-md-8\">\r\n              <h3>訂單細節</h3>\r\n              <table class=\"table\">\r\n                <tbody>\r\n                  <tr>\r\n                    <th style=\"width: 100px\">訂單編號</th>\r\n                    <td> {{tempOrder.id}} </td>\r\n                  </tr>\r\n                  <tr>\r\n                    <th>下單時間</th>\r\n                    <td> {{getDate(tempOrder.create_at)}}<br>{{getTime(tempOrder.create_at)}} </td>\r\n                  </tr>\r\n                  <tr>\r\n                    <th>付款時間</th>\r\n                    <td>\r\n                      <span v-if=\"tempOrder.paid_date\">\r\n                         {{getDate(tempOrder.paid_date)}}<br>{{getTime(tempOrder.paid_date)}}\r\n                      </span>\r\n                      <span v-else>時間不正確</span>\r\n                    </td>\r\n                  </tr>\r\n                  <tr>\r\n                    <th>付款狀態</th>\r\n                    <td>\r\n                      <strong class=\"text-success\" v-if=\"tempOrder.is_paid\">已付款</strong>\r\n                      <span class=\"text-muted\" v-else>尚未付款</span>\r\n                    </td>\r\n                  </tr>\r\n                  <tr>\r\n                    <th>總金額</th>\r\n                    <td>\r\n                       {{tempOrder.total}}\r\n                    </td>\r\n                  </tr>\r\n                </tbody>\r\n              </table>\r\n              <h3>選購商品</h3>\r\n              <table class=\"table\">\r\n                <thead>\r\n                  <tr></tr>\r\n                </thead>\r\n                <tbody>\r\n                  <tr v-for=\"item in tempOrder.products\" :key=\"item.product_id\">\r\n                    <th>\r\n                       {{item.product.title}}\r\n                    </th>\r\n                    <td> {{item.qty}}  /  {{item.product.unit}} </td>\r\n                    <td class=\"text-end\">\r\n                       {{item.final_total}}\r\n                    </td>\r\n                  </tr>\r\n                </tbody>\r\n              </table>\r\n              <div class=\"d-flex justify-content-end\">\r\n                <div class=\"form-check\">\r\n                  <input\r\n                    class=\"form-check-input\"\r\n                    type=\"checkbox\"\r\n                    value=\"\"\r\n                    id=\"flexCheckDefault\" v-model=\"tempOrder.is_paid\"/>\r\n                  <label class=\"form-check-label\" for=\"flexCheckDefault\">\r\n                    <span v-if=\"tempOrder.is_paid\">已付款</span>\r\n                    <span v-else>未付款</span>\r\n                  </label>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"modal-footer\">\r\n          <button\r\n            type=\"button\"\r\n            class=\"btn btn-outline-secondary\"\r\n            data-bs-dismiss=\"modal\"\r\n          >\r\n            取消\r\n          </button>\r\n          <button\r\n            type=\"button\"\r\n            class=\"btn btn-primary\" @click=\"editOrderItem(tempOrder)\"\r\n          >\r\n            修改付款狀態\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Modal from 'bootstrap/js/dist/modal'\r\n\r\nexport default {\r\n  // props為參考範例原始碼\r\n  // 帶入物件需類別驗證為type : Object，預設值為imagesUrl: []\r\n  props: {\r\n    order: {\r\n      type: Object,\r\n      default () {\r\n        return {\r\n        }\r\n      }\r\n    }\r\n  },\r\n  data () {\r\n    return {\r\n      tempOrder: {},\r\n      orderModal: ''\r\n    }\r\n  },\r\n  watch: {\r\n    order () {\r\n      this.tempOrder = this.order\r\n    }\r\n  },\r\n  methods: {\r\n    openModal () {\r\n      console.log(this.tempOrder)\r\n      this.orderModal.show()\r\n    },\r\n    closeModal () {\r\n      this.orderModal.hide()\r\n    },\r\n    getDate (ticksOfItem) {\r\n      const ticks = ticksOfItem * 1000\r\n      const d = new Date(ticks).getFullYear() + '-' + (new Date(ticks).getMonth() + 1) + '-' + new Date(ticks).getDate()\r\n      return d\r\n    },\r\n    getTime (ticksOfItem) {\r\n      const ticks = ticksOfItem * 1000\r\n      const t = new Date(ticks).getHours() + ':' + new Date(ticks).getMinutes() + ':' + new Date(ticks).getSeconds()\r\n      return t\r\n    },\r\n    editOrderItem (item) {\r\n      const id = this.tempOrder.id\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/order/${id}`\r\n      const requestData = {\r\n        data: this.tempOrder\r\n      }\r\n      this.$http\r\n        .put(url, requestData)\r\n        .then((response) => {\r\n          const success = response.data.success\r\n          if (success) {\r\n            this.$emit('emit-update')\r\n            this.$toast.success('訂單已更新。')\r\n            this.orderModal.hide()\r\n          } else {\r\n            const message = response.data.message\r\n            this.$toast.error(message)\r\n          }\r\n        })\r\n        .catch((error) => {\r\n          this.$toast.error(error)\r\n        })\r\n    }\r\n  },\r\n  mounted () {\r\n    const myOrderModal = document.querySelector('#orderModal')\r\n    this.orderModal = new Modal(myOrderModal)\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n.bg-product-hightlight:hover {\r\n    background-color: blanchedalmond;\r\n}\r\n\r\n.bg-product-grey {\r\n    background-color: #edf2fa;\r\n}\r\n</style>\r\n","import { render } from \"./OrderModal.vue?vue&type=template&id=b111d66a\"\nimport script from \"./OrderModal.vue?vue&type=script&lang=js\"\nexport * from \"./OrderModal.vue?vue&type=script&lang=js\"\n\nimport \"./OrderModal.vue?vue&type=style&index=0&id=b111d66a&lang=css\"\nscript.render = render\n\nexport default script","import { render } from \"./Orders.vue?vue&type=template&id=11f92f96\"\nimport script from \"./Orders.vue?vue&type=script&lang=js\"\nexport * from \"./Orders.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","var DESCRIPTORS = require('../internals/descriptors');\nvar defineProperty = require('../internals/object-define-property').f;\n\nvar FunctionPrototype = Function.prototype;\nvar FunctionPrototypeToString = FunctionPrototype.toString;\nvar nameRE = /^\\s*function ([^ (]*)/;\nvar NAME = 'name';\n\n// Function instances `.name` property\n// https://tc39.es/ecma262/#sec-function-instances-name\nif (DESCRIPTORS && !(NAME in FunctionPrototype)) {\n  defineProperty(FunctionPrototype, NAME, {\n    configurable: true,\n    get: function () {\n      try {\n        return FunctionPrototypeToString.call(this).match(nameRE)[1];\n      } catch (error) {\n        return '';\n      }\n    }\n  });\n}\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./OrderModal.vue?vue&type=style&index=0&id=b111d66a&lang=css\""],"sourceRoot":""}